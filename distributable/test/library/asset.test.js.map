{"version":3,"sources":["../../../source/test/library/asset.test.js"],"names":["test","unbundledContentFn","Pug","compileFile","require","resolve","data","log","bundler","Bundler","__dirname","bundle","default","bundledContentFn","is"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;AAEA,kBAAK,gDAAL,EAAuD,MAAOA,IAAP,IAAgB;AAErE,MAAIC,kBAAkB,GAAGC,aAAIC,WAAJ,CAAgBC,OAAO,CAACC,OAAR,CAAgB,qBAAhB,CAAhB,CAAzB;;AACA,MAAIC,IAAI,GAAG;AAAE,YAAQ;AAAV,GAAX;AAEAN,EAAAA,IAAI,CAACO,GAAL,CAAU,8BAA6BN,kBAAkB,CAACK,IAAD,CAAO,GAAhE;AAEA,MAAIE,OAAO,GAAG,IAAIC,sBAAJ,CAAYL,OAAO,CAACC,OAAR,CAAgB,oBAAhB,CAAZ,EAAmD;AAC/D,aAAS,KADsD;AAE/D,cAAW,GAAEK,SAAU,SAFwC;AAG/D,eAAW,WAHoD;AAI/D,cAAU,MAJqD;AAK/D,aAAS,KALsD;AAM/D,gBAAY;AANmD,GAAnD,CAAd;AASA,QAAM,oBAAOF,OAAP,CAAN;AACA,QAAMA,OAAO,CAACG,MAAR,EAAN;AAEA,MAAI;AAAEC,IAAAA,OAAO,EAAEC;AAAX,MAAgC,yBAAaT,OAAO,CAACC,OAAR,CAAgB,oBAAhB,CAAb,kDAApC;AAEAL,EAAAA,IAAI,CAACO,GAAL,CAAU,4BAA2BM,gBAAgB,CAACP,IAAD,CAAO,GAA5D;AACAN,EAAAA,IAAI,CAACc,EAAL,CAAQD,gBAAgB,CAACP,IAAD,CAAxB,EAAgCL,kBAAkB,CAACK,IAAD,CAAlD;AAED,CAxBD","sourcesContent":["import Bundler from 'parcel-bundler'\nimport { format as Format } from 'prettier'\nimport Pug from 'pug'\nimport Test from 'ava'\n\nimport Plugin from '../../index.js'\n\nTest('import(require.resolve(\\'./target/target.js\\')', async (test) => {\n\n  let unbundledContentFn = Pug.compileFile(require.resolve('./source/source.pug'))\n  let data = { 'name': 'Bob' }\n  \n  test.log(`unbundledContentFn(...) = '${unbundledContentFn(data)}'`)\n\n  let bundler = new Bundler(require.resolve('./source/source.js'), {\n    'cache': false,\n    'outDir': `${__dirname}/target`,\n    'outFile': 'target.js',\n    'target': 'node',\n    'watch': false,\n    'logLevel': 0\n  })\n\n  await Plugin(bundler)\n  await bundler.bundle()\n\n  let { default: bundledContentFn } = await import(require.resolve('./target/target.js'))\n\n  test.log(`bundledContentFn(...) = '${bundledContentFn(data)}'`)\n  test.is(bundledContentFn(data), unbundledContentFn(data))\n\n})\n"],"file":"asset.test.js"}